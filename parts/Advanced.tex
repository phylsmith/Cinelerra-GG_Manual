\chapter{Advanced Editing}%
\label{cha:advanced_editing}

\section{Proxy}%
\label{sec:proxy}
\index{proxy}

Proxies were introduced to allow for a smoother timeline experience. Full HD and everything from 4K size up are usually very large in file size. In addition, some commonly used codecs (for example h264/5) are very compressed and interframe type, so they are more CPU intensive for timeline playback. These files cause performance problems on smaller computers. As a solution, proxies were introduced to reduce the file size. Reduced means to minimize the resolution/dimension, as usually not the full resolution is needed because the compositor generally occupies only a fraction of the computer screen. The proxy provides a scaling factor which indicates how much the original resolution should be reduced. 
There is also the \textit{proxy 1:1} \index{proxy!1:1} option that maintains the original resolution but still allows you to modify codec parameters (lowering the bit rate, for example). This is explained in the next section, \ref{sec:transcode}.
Always remember when getting ready to render the project, disable Proxy to return to the original settings with the highest quality.  

To use proxy in a classic way, that is as a scaling, select \texttt{Settings $\rightarrow$ Proxy settings} and change the Scale factor from Original size to your downsized choice.  You can choose ffmpeg as the \textit{File Format} \index{file format} and for the \textit{File Type} a choice of various codecs associated with that.  A good choice for \textit{File Type} is the default of mpeg or mov which can usually be quite fast.  In addition you can modify values for that codec by clicking on the wrench icon. Once you have created a
proxy file, it will be reused and does not have to be created again as long as you
do not change certain parameters.  This saves a lot of CPU time.

There are two main ways to use Proxy, with or without \texttt{Rescaled to project size} option checked. The options of the Scale factor may be different if Rescaled to project size is checked versus unchecked. It is a special case when the Scale factor is set to "1" and it does not  matter if Rescaled to project size is checked or unchecked.

The usual steps to use Proxy are:
\begin{enumerate}
	\item Check that \textit{File Format} is set to \texttt{FFMPEG}.
	\item Check or uncheck the \texttt{Rescaled to project size} (FFMPEG only). The difference with this option will be explained here \ref{sub:rescaled_project_size_works}. But for old computers checking Rescaled to project size is not recommended; again due to requiring more CPU. You need to know that when Rescaled to project size is unchecked some Effects/Plugins do not work as expected because they use pixel values instead of percentage values as is used in the Project Format. For example \texttt{Title}, \texttt{Blur}, \texttt{Sketcher} plugins do not work right if unchecked, while \texttt{Perspective} and \texttt{Crop\&Position} plugins work correctly for both checked and unchecked.
	\item Choose the \textit{Scale factor}. The options may be different if Rescaled to project size is checked or unchecked. The smaller the Scale factor is, the smoother playing on the Timeline will be ($\frac{1}{8}$ is smaller than $\frac{1}{4}$), but on the Viewer/Compositor the image will be degraded/pixelated more.
	\item Set the \textit{File Type} in the \textit{File Format} for FFMPEG, such as mp4, mpeg, or mov. Still images like jpg, tiff, and png will be converted to PNG files with alpha channel if it had an alpha channel.
	\item Click on the wrench icon to configure video compression; just use the default values if you are unsure and prefer not to experiment.
	\begin{enumerate}
		\item Select the Compressor type (codec).
		\item Change Bitrate, or Quality, and Pixels. Because not all codecs use the alpha channel for transparency, check that the letter "a" is in the Pixels name (such as yuva420p or rgba) to retain the alpha channel.
		\item Click on the OK button to close the Compressor window.
	\end{enumerate}
	\item Now click on the \texttt{OK} button to start the rendering for the proxy.
	\item Look in the lower right corner of the main window where there is a progress bar and a percentage value showing the progress of the creation of proxies, and in the lower left corner there is the \texttt{Creating proxy files... ETA: hh:mm:ss} text with the "Estimated Time of Arrival (completion)" in hours, minutes, seconds. Depending on how many files your project uses, the file size, which codec is used, the scale factor, and cpu performance, creating proxies may take some time.
\end{enumerate}

You will know that Proxy mode is enabled because:
\begin{itemize}
	\item A white colored \textbf{P} meaning \textit{Proxy}, or a white colored \textbf{S} meaning \textit{Proxy Scaled} icon is shown in the upper right corner of the main window to the left of the FF icon.  If using the Cakewalk or Neophyte theme it will be a \textbf{Ps} icon.
	\item  The Proxy folder in the Resources window has been populated with the names and/or icons of the proxy media.
	\item The track title bar in the timeline will have the name of the proxy file instead of the original name. So if the video filename is \texttt{VID\_20221012.mp4}, the Proxy Scale Factor is $\frac{1}{4}$, and the Proxy container is mov, then the proxy name will be \texttt{VID\_20221012.proxy4-mp4.mov}.
\end{itemize}

The Proxy icon is a toggle button so that you just click on the icon to change modes.  Or it can be toggled using the \texttt{Ctrl+R} shortcut. 

\begin{table}[ht]
	\centering
	\begin{tabular}{|p{2.5cm}|p{3.2cm}|p{3.2cm}| p{3.2cm}|}
		\hline
		\textbf{Proxy State} & \textbf{Rescaled to project size (FFMPEG only)} & \textbf{Proxy icon for themes:
		Cakewalk/Neophyte} & \textbf{Proxy icon for themes: the Others}\\
		\hline
		Off & checked/ unchecked & no icon
		 & no icon\\
		\hline
		Active (Enable) & checked & Ps: P(green)  s(white)
		 & S (white)\\
		\hline
		Disable & checked & Ps: P(red)  s(white) & S (gray)\\
		\hline
		Active (Enable) & unchecked & Ps: P(green) s(red) & P (white)\\
		\hline
		Disable & unchecked & Ps: P(red) s(red) & P (gray)\\
		\hline
	\end{tabular}
	\caption{Table: list States of the Proxy icon}
\end{table}

When you disable Proxy using the toggle button for Proxy, or its shortcut (\texttt{Ctrl+R}), in the Proxy Settings window you will see the \texttt{Scale Factor = 1}, but if you look at the Active Scale and the State, you can understand what your setting is.
Proxy can have three possible States: Off, Active, Disabled. The difference between Off and Disabled is that Disabled means you have set the Proxy and it is temporarily switched off (and you can see the icon in the upper right corner of the main window); you can enable proxy by just clicking on the icon, so the State will then be changed from Disabled to Active.

\subsection{How Rescaled to project size (FFMPEG only) works}%
\label{sub:rescaled_project_size_works}

\begin{itemize}
	\item When \texttt{Rescaled to project size (FFMPEG only)} is checked, the size of the video data to be computed will always be the same as the Project Format. The size of your video is scaled down to the Scale factor BUT then it is rescaled up to the Project Format. For example, your Project Format is 1920x1080 and Proxy's Scale factor is $\frac{1}{4}$, then your videos ($1920x1080$) will be scaled down to 480x270 and then up-scaled to $1920x1080$. All the Effects/Plugins work correctly because the original resolution/geometry/size is not changed. For an old computer, this option is not recommended.
	\item When \texttt{Rescaled to project size (FFMPEG only)} is UNchecked, the size of the video data to be computed will be reduced to the Scale factor. The size of your video is scaled down to the Scale factor. For example, your Project Format is 1920x1080 and Proxy's Scale factor is $\frac{1}{4}$, then your videos ($1920x1080$) will be scaled down to $480x270$. It works as if the Project Format were $480x270$ (and really it works). If you take a look at \texttt{Settings $\rightarrow$ Format...} when Proxy is enabled (Active), you can see that the Width and Height are changed according to the Scale factor; you absolutely must NOT change these values! The good thing is that your computer will be faster. The bad thing is that some Effects/Plugins do not work as expected because they use pixel units. Examples are \texttt{Title} and \texttt{Blur} plugins. A workaround is needed for that, such as using Inkscape to create a title and export it to PNG that you load instead of using the \textit{Title} plugin.

\end{itemize}

Note: the dimensions of the frame/image are downscaled to the Scale factor; so if the Scale factor is $\frac{1}{4}$ and the dimension of the image is $4288x2848$ pixels, that image will be downscaled to $1072x712$. It doesn't matter what the Project Format is.

\subsection{Using proxy}%
\label{sub:using_proxy}

To insert a clip/video from Resources window to the Timeline when Proxy is enabled (Active) you MUST Drag \& Drop that clip/video from the Proxy folder instead of the Media folder, as well as for Nested clips. And also if you want to load the clip in the Viewer or Compositor. You can use clips in the Clips folder in any State of the Proxy - it does not matter if Proxy is enabled or disabled.

Rendered proxy media is saved in the same directory as the original media. As usual, you can delete proxy files from the project or disk in the Resources window if you no longer want to retain them. You should always save your project with the Proxy disabled.

If you create proxies for Nested clips they will be saved in \texttt{\$HOME/Videos} unless you modify that in \texttt{Settings $\rightarrow$ Preferences}, \texttt{Interface tab}, \texttt{Nested Proxy Path}. If you change anything in a Nested clip using the Open EDL feature, you must first delete its old proxy file from disk because it is not updated automatically, and then enable Proxy again so that a new one is created. 

Not all the settings for Proxy are saved in the project: the values of Active Scale and the Rescaled to project size are saved but not the \textit{File Format}, \textit{File Type} and all video compression data. A good idea is to record this information in a README file about your project where you make a note of your Proxy settings for that project. 
This is especially important because some Projects may use different Proxy settings and
if you load a project where the Proxy is set and disabled, it could use a different
setting because you changed the Proxy settings in a project you were working on before.
If in that Project its proxy files were not deleted and you want to reuse them to save
time, unfortunately they will be created again because the proxy settings have changed.

If the \textit{Creation of proxy on media loading} option has been checked, then when you load other media later, proxies will be created for them automatically, or else you can change the Proxy's State from disabled to enabled (Active) using the Proxy icon. Previous proxy renders will be reused unless you change one of the following proxy parameters: \textit{Scale factor}, \textit{File Format}, or \textit{File Type}. If proxies have been created and then you decide to change only the Compression type (Codec, Bitrate, Quality, Pixels), without changing the Scale factor or Container, you must delete proxy files from the disk beforehand. That is because \CGG{} does not read the compression type; it does read the filename and if the filename does
not change, \CGG{} thinks the proxy was already created.

\subsection{Scale factor set to 1, a special case}%
\label{sub:scale_factor_special_case}

This special case is used to temporarily change the codec parameters of your video while maintaining the original resolution - for example maybe your videos use long-GOP or the video codec is too hard to handle due to a strong compression. It does not matter if Rescaled to project size is checked or unchecked. For old computers, or underpowered computers, this option is not recommended.

\subsection{Setting the proxy}%
\label{sub:setting_proxy}

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.8\linewidth]{proxy-02.png}
	\caption{Proxy settings dialog}
	\label{fig:proxy-02}
\end{figure}

Screencast in figure~\ref{fig:proxy-02} shows the \textit{Rescaled to project size} checked so you can still use plugins correctly and the original project size is kept.  The Scale factor pull-down gives you available size options.  Note the new media dimensions shown (partially covered).  If the size is an odd number, 1 is added to make the dimensions both even numbers.

To go back to the original media permanently, simply set the Scale factor to Off or disable the Proxy by clicking on its toggle button. However, if you decide to reuse the proxies, those which have not been deleted from the Hard Disk (but have been removed from the project) will be used without re-rendering - this saves a lot of time. To completely remove the created proxies you will have to delete them manually from the Hard Disk.

There is also a convenient \textit{Beep on done volume} slider included so that you can work on other tasks until there is an audible notify of completion.  The default volume is set to 0 for no audible notify.

A good choice for classic proxy settings with a 1080p source video is:

\begin{lstlisting}[numbers=none]
Scale Factor: 	1/4
File Format:	FFMPEG - mpeg
Video Preset:
Compression:	mpeg.mpeg
Bitrate:	2000000
Quality:	-1
Pixels:		yuv420p
\end{lstlisting}

If you get errors for some videos, such as those with strange variable bit rate or some types of files made on a smartphone, a usually reliable alternative is to change the following parameters:

\begin{lstlisting}[numbers=none]
File Format:	FFMPEG - mov
Video Preset:
Compression:	mov.mov
\end{lstlisting}

Or if you want small files with high image quality, a \textit{File Format} of m2ts is optimal.  For example a 1 GB file can be reduced to 50 MB with scale $\frac{1}{2}$. 

If you get error messages \index{proxy!error} when creating proxies, check the Video wrench settings.  These usually default to values that are expected to work correctly for the \textit{File Format} and codec you selected but they can be changed and may result in errors.  If you get an error message of \textit{check\_frame\_rate failed} followed by \textit{Error making proxy} in the popup Errors window, do just that and check the Frame rate value by going to the Resources window, Media folder, and use the right mouse button for the \textit{Info} option for the specific media in question.  You can change the frame rate in this window to a more codec acceptable value.  Different codecs may have different legal values.

A faster method of creating the proxy file outiside of \CGG{} for users who have
vaapi hardware acceleration capability on their graphics board is via a script.  Speed
up could potentially be 10 to 30 times faster depending on the parameter values you choose
and the size of your video file.  This script is included in the doc subdirectory as 
\texttt{vaapi\_proxy.sh} for users not using an AppImage version and is shown below.  You will
have to tune it to your specific needs for the vaapi\_device name (currently set to
\texttt{/dev/dri/renderr128}), file type (currently set to h264 and mp4), and proxy size (now is 6). 
Once you have created the proxy file, you then start \CGG{}, load the original un-proxied
video, use the Settings pulldown and choose the Proxy settings options as you would normally,
but because you already have created the existing proxy file with the correct name, it will
be automatically loaded and will not have to create it.  The filename of the proxy file
must be in the same location as the original video and have the exact required naming
conventions and scale factor.

\begin{lstlisting}[numbers=none]
#!/bin/bash
filename="$1"
fileout="${filename%.*}"
proxy="6"
# Hardware encode AMD
ffmpeg -threads 2 -hwaccel vaapi  -vaapi_device /dev/dri/renderD128 \
 -i  "$1" -c:v h264_vaapi -vf "format=nv12,hwupload,scale_vaapi=iw/'$proxy':ih/'$proxy'" \
 -vcodec h264_vaapi  -preset fast -c:a copy \
 -bf 0 -profile:v 66 "$fileout".proxy"$proxy"-mp4.mp4
\end{lstlisting}

\subsection{Proxies with Alpha channel}%
\label{sub:proxies_alpha_channel}

Next are some examples of tested and working configurations that maintain the alpha channel:

\begin{lstlisting}[numbers=none]
Proxy #1
	Scale factor: 1/4
	Rescaled to project size (FFMPEG only) = unchecked
	File Format: FFMPEG | qt
	Video Preset-->
		Compression: png.qt
		Bitrate: 0
		Quality: -1
		Pixels: rgba (or rgba64be)
	
	
Proxy #2
	Scale factor: 1/4
	Rescaled to project size (FFMPEG only) = unchecked
	File Format: FFMPEG | qt
	Video Preset-->
		Compression: magicyuv.qt
		Bitrate: 0
		Quality: -1
		Pixels: yuva444p
	
	
Proxy #3
	Scale factor: 1/4
	Rescaled to project size (FFMPEG only) = unchecked
	File Format: FFMPEG | qt
	Video Preset-->
		Compression: openjpeg.qt
		Bitrate: 0
		Quality: -1
		Pixels: yuva420p
	
	
Proxy #4
	Scale factor: 1/4
	Rescaled to project size (FFMPEG only) = unchecked
	File Format: FFMPEG | pro
	Video Preset-->
		Compression: prores_4444.pro
		prores_4444xq.pro
		Bitrate: 0
		Quality: -1
		Pixels: yuva444p10le
	
	
Proxy #5
	Scale factor: 1/4
	Rescaled to project size (FFMPEG only) = unchecked
	File Format: FFMPEG | mkv
	Video Preset-->
		Compression: user_ffvhuff.mkv
		Bitrate: 0
		Quality: -1
		Pixels: yuva4--p
				   yuva4--p--le
\end{lstlisting}

\section{Transcode}%
\label{sec:transcode}
\index{transcode}

Transcode, an option under the \textit{Settings} pulldown right next to the Proxy settings option, is a type of full resolution \textbf{1:1 Proxy} \index{proxy!1:1}.
The process of transcoding works directly from the resource; it is independent of the timeline. 
All of the loaded asset media will be converted, that is, rendered in the selected format and loaded onto the timeline. 
Menu choices besides the usual File Format \index{file format} and File Type include: \textit{Tag suffix} (to add to media filename), \textit{Remove originals from project}, \textit{Into Nested Proxy directory} (an option to have the file saved here instead of the location of the original media), and \textit{Beep on done} volume.

The settings of the project have an effect on the outcome, for example the dimensions are taken into account. The resulting files are also larger than if they were created directly with ffmpeg.
Transcode works for videos with or without audio and even single frame files, like png's.
If you have a video file that also contains audio, and you convert only the video, the original audio will stay on the timeline if do not check \textit{Remove originals from project}. Or vice versa if audio converted and not video.
Multiple stream media will only transcode the first stream (this would be like the TV channel recordings in the United States).
You will get an error message if you already have a transcoded file in the selected format with the same suffix name and try to transcode it again with a different selection made -- you will have to delete that file first. An example would be
an already converted file that has both video and audio and now you request video only. 

The BIGGEST gain from using this is if you have media that is not \textit{seekable} \index{seek}, that is, you can play it from the beginning but can not move to another spot and have the audio or video play correctly. A video file with no keyframes makes seeking next to impossible, but then a Transcode generally adds these keyframes. This is particularly useful for the \texttt{mkv} container, which often has seek problems. For more details on mkv container see \ref{ssub:note_mkv_container}

Another important function of Transcode is being able to convert the project's media into a high-quality \textit{mezzanine} codec \index{mezzanine codec} (sometimes also called \textit{intermediate} codec \index{digital intermediate}), which makes timeline work lighter and more efficient. In fact such codecs (ffv1, ProRes, DNxHD, OpenEXR, huffyuv, etc) are generally little or not at all compressed; the type of compression is intraframe --more suitable for editing, and the image quality (4:2:2 up; 10-bit color up; floating point; etc) is suitable for \textit{Color Correction}, \textit{Chroma Key} and \textit{Rotoscoping}. The use of mezzanine codecs leads to very large files, so you need to make sure you have enough storage space.


\section{OpenEDL}%
\label{sec:openedl}
\index{openEDL}

To edit EDL \index{EDL} that is included with your project as Clips, Nested
Clips, Referenced File, or Xml you can use the option \textit{Open
	EDL} in the Resources window for the highlighted media.  Then
with a simple button click you can return to your main timeline project.
For example, if you have a nested clip that originally had several
plugins added to it before it was nested, you can edit those plugin
parameter values. Previously to make any changes to these types of
EDL you had to remake the whole clip from scratch.  The program is 
actually "opening" the file as it currently exists for that particular
media so that it can be edited separately from the project EDL. In other NLEs the term \textit{sub-timeline} is used.

Here is how this works. In the Clip \index{clip !older} or Media folder \index{media folder} or on a timeline
EDL edit, the option \textit{Open EDL} for the highlighted clip or
nested clip is available so that when you choose this option, that
EDL will be brought up on the timeline superseding the current EDL
that exists on the timeline \index{timeline}.  Now, once the clip is open on the
timeline, you can edit it however you want. The previous timeline
EDL is \textit{pushed onto a stack} so it can be recalled by
\textit{popping the stack} with a click of the left mouse button in
the upper right hand corner of the timeline to the left of the
\textit{shell cmds} icon.  Initially this button displays a 0 to
indicate your initial timeline/project.  Then this button will read
1 if you choose \textit{Open EDL} and then back to 0 and your
original timeline with the left mouse click.  You can go several
levels deep so instead of 1, it could be 2, 3, $\dots$ but this
requires some thought to avoid potential confusion.

An example of a typical set of steps to follow is:
\begin{enumerate}
	\item Load your media using insertion strategy of \textit{Replace
		current project}.  There will be number 0 in the upper right hand corner
	of the main menu with the tooltip of \textit{Close EDL}.
	\item Highlight a selection on the timeline and press the
	\textit{To clip} icon and click the green checkmark OK.
	\item In the Resources window, open the Clip folder and you will
	see that Clip 1 is present.
	\item Highlight Clip1 and right mouse the item to bring up
	available options and select \textit{Open EDL}.
	\item Now you will see the timeline change from the original
	media to just the clip content and the number in the upper right hand
	corner will change from 0 to 1.
	\item Add a visible effect, like AgingTV to the timeline.
	\item Click on the number 1 in the main menu bar to see the timeline
	restored to the original media.
	\item Drag the clip from the Resources Clip folder to the
	timeline and you will see the AgingTV effect.
\end{enumerate}

You can follow the same steps as above by first using the option
\textit{Nest to media} in the Clip folder which nests the clip and
moves it out of the Clip folder to the Media folder.  Then use
\textit{Open EDL} on the Nested EDL \index{nested EDL} in the media folder.  When you
Open EDL and edit the changes, those changes will take affect on any
and all occurrences of that nested clip on the current and/or
original timeline. The option to unnest that clip and put that back
into the Clip folder is the option \textit{EDL to clip}.  The nested
clip is still in the Media folder.  It will now have a name of the
next available Clip number but the comment contains the previous name so
you can tell where it came from.

Instead of using the number on the main menu to close the current
EDL, both the Media and Clip folders have \textit{Close EDL} options
with the left mouse button. Clicking on the number button is quick and
easy but for infrequent usage it is not obvious, whereas if you use
\textit{Open EDL} you see \textit{Close EDL} right below that and so
it is very obvious.  In addition in the case of where you have
opened a EDL, and you no longer see that clip in the folder, the
right mouse button where no media is highlighted will also display
the Close EDL option.

%\pagebreak
\begin{figure}[h]
	\centering
	\includegraphics[width=1\linewidth]{editing-img001.png}
	\caption{Once you have an Open EDL, the easiest way to close it.}
	\label{fig:open_edl}
\end{figure}
\relax

In addition to the \textit{Open EDL} option in the Resources menu,
this option is available on the timeline when the cursor is on an
EDL-type edit. To get to this option, click on the middle mouse
button on that edit.  If it is not EDL, the option will not be
shown.  In summary:

\begin{center}
	\begin{tabular}{ll}
		\toprule
		Media folder of Resources window & Open EDL for Nested or Referenced EDLs\\
		Clip folder of Resources window & Open EDL for clips\\
		Track timeline & Open EDL for Nested or Referenced EDLs\\
		\bottomrule
	\end{tabular}
\end{center}

An aside -- when nesting and unnesting clips to take advantage of
this feature, names of the media can lead to some confusion.  For
example, if you nest a clip, the new name in the Media folder is the
word \textit{Nested} followed by an underscore with the date and
timestamp, another underscore, and then the clip name.  Then when
you unnest this Media folder clip via the \textit{EDL to clip}
option, the name will be changed in the Clip folder to the next
available Clip number.  However the comment field will reflect the
nested clip name from which it was derived.  To avoid confusion you
can easily change the name for these clips in either the Clip or
Media folder because they are not real files at this point. To do
so, highlight the clip name in Resources, click on Info and type in
a new name.

For additional safety, the \textit{Open EDL} feature includes
additional backup capabilities. Automatically \CGG{} saves a backup \index{backup}
when certain changes are made or you can always use the shortcut `b'
to do one yourself, although keep in mind it will be overwritten
whenever \CGG{} wants to do another backup.  Now there is a shortcut
for the backup shortcut `b' so you can keep your hand on the mouse
instead of the keyboard.  Just click on the number button in the upper right
hand corner of the main window.  If number is at 0, it backs up to
backup.xml, if at 1, it backs up to \texttt{backup1.xml} and so on
\dots up to \texttt{backup9.xml}.

When \textit{Open EDL} is invoked, the current EDL and current undo
stack are both \textit{pushed}, and the active session EDL is
replaced with the target clip/nested edl.  A new undo stack is
created, and the active \texttt{backup.xml} file name is decorated
with the stack level.  So, \texttt{backup.xml} is
\texttt{backup1.xml} when your edits are at stack level 1,
\texttt{back\-up2\-.xml} at stack level 2, and so on.  This means
that if you \textit{load backup} at stack level 1, the session will
reload from history at stack level 1, not the main session.

See a real-world workflow at appendix \nameref{sec:workflow_openedl_nested_clips}

\section{File by Reference}%
\label{sec:file_by_reference}
\index{file by reference}

It is sometimes handy to have EDL \index{EDL} assets not as a copy, but as a
reference that is automatically updated into your project.  Suppose
you have several short videos that at the end have the same credits
which include the current year such as 2021.  But now it is 2022 and
all of the videos would have to be individually updated with the new
date.  By including a \textit{Referenced File} as the EDL file type
when you create each of the videos, you can just change the one
credits xml file and the next time you load one of the videos and
render it, it will now automatically have the updated information.

The purpose of this feature is to be able to rework a smaller
section of a global master project at any time, which can be done by
an "assistant" (i.e. external software like GIMP or Inkscape, $\dots$) and then this work is automatically reflected in the
global master project.  It is for \textbf{advanced usage only}.

Up until the addition of this feature, \CGG{} has always used copies
and no direct reference in order to ensure original data is never
compromised (No Destructive editing).  In the usual case, subprojects as xmls are copied into
a master project where subprojects had been inserted, so that if you
change something in a subproject or delete a subproject, it would
have no affect on the master project.  But now with \textit{File by
	Reference}, any project that uses a referenced file will
automatically include any changes made to the referenced file when
loaded.  At the same time, if you use the EDL file NOT as a
referenced file in a project since it is then just a copy, it will
not be updated.  Because of this difference, the user needs to be
very aware of what using this feature could do.

\textbf{Use with extreme caution}.  However, there are several
built-in safety features and a warning that should never be turned
off even though it gives you the option to do so.  These include:

\begin{enumerate}
	\item When the \texttt{File, Load files} menu is opened, the EDL
	strategy will always be set to just EDL as default.  Although, if
	you use Apply and leave the Load Menu open, it will stay changed to
	what you selected until it is re-opened.
	\item When an EDL is opened as \textit{Reference}, the color of
	that file name in the Resources Media folder is different in order
	to serve as a reminder that it is special.
	\item A warning message is displayed in a popup window when you
	load a \textit{File by Reference} that reads \texttt{Other projects can
	change this project and this can become a broken link}.  Although
	you can check the warning box to never see this warning again, you
	would be well advised to not do so.  It is a great reminder of
	consequences and you will not want to be cavalier about the warning.
	Instead just use the X to dismiss the warning.
\end{enumerate}

Here is a step by step example of how you can use \textit{File by
	Reference}:
\begin{enumerate}
	\item Start up \CGG{} and use the Title plugin to create a new
	credits file.  Save as credits.xml.
	\item Start a New project and then load an existing master
	project to the timeline.
	\item Load the credits file you created in step 1 with a Load
	Strategy of Create Resources Only and with EDL Strategy as
	\textit{Reference}.
	\item Note the color change in the credits.xml filename and the
	reference comment in the Resources Media folder.
	\item Drag the credits file to an empty spot on the timeline.
	Save this new master project and quit.
	\item Start \CGG{} up again.  Load credits.xml and make a change
	to the Title and save again.
	\item Exit \CGG{}; restart \CGG{}; load your master project and
	now you will automatically see on the timeline the changes you just
	made in the previous step.
\end{enumerate}

\section{Trimming}%
\label{sec:trimming}
\index{trim}

With some edits on the timeline it is possible to do trimming. By
trimming you shrink or grow the edit boundaries (\textit{head} or \textit{tail}) by dragging them. In
drag and drop mode or cut and paste mode, move the cursor over an
edit boundary until it changes shape. The drag handle \index{drag handles} shows as a
left or right facing fat arrow when you cursor near the clip start
or end.  If the cursor faces left, the dragging operation affects
the beginning of the edit. If the cursor faces right, the dragging
operation affects the end of the edit.

The effect of each drag operation not only depends on the behavior
button but whether the beginning or end of the edit is being
dragged. When you release the mouse button, the trimming operation
is performed.

For all file formats, other than still images, the extent of the
trimming operation is limited to the source file length. Attempting
to drag the start of the edit beyond the start of the source, limits
it to the source start. In all trimming operations, all edits which
start on the same position as the cursor when the drag operation
begins are affected. You have to disarm tracks in order to prevent
edits from being affected.

You have 6 different choices of which mouse button to use for
specific types of editing while using the drag handle.  You change
the drag handle mouse effects by using the \texttt{Settings
	$\rightarrow$ Preferences  $\rightarrow$ Interface} tab and
modifying the Editing section as shown in the next
figure~\ref{fig:trim}. The drag handle affects not only the clip you
are working on but also frequently the entire duration of all clips
on the timeline.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.5\linewidth]{trim.png}
	\caption{Default choices for mouse: Ripple for button 1; Roll
		for button 2; Slip for button 3}
	\label{fig:trim}
\end{figure}

A description of the fundamental/common terminology for choices
follows.

\begin{description}
	\item[All Edits (ripple)] \index{trim!ripple} shorten or lengthen the start or end
	of a single piece of media while moving all media to the right of
	that clip up or down on the timeline correspondingly.  Timeline
	duration is modified.  In a drag \textit{All Edits} operation, the
	beginning of the edit either cuts data from the edit if you move it
	forward or pastes new data from before the edit if you move it
	backward. The end of the edit pastes data into the edit if you move
	it forward or cuts data from the end of the edit if you move it
	backward. All the following edits shift. If you drag the end of the
	edit past the start of the edit, the edit is deleted.
	\item[One Edit (roll)] \index{trim!roll} move the in and out point of a single
	clip without changing the timeline duration. In a drag \textit{One
		Edit} operation, nothing is cut or pasted. If you move the beginning
	or end of the edit forward, the source reference in the edit shifts
	forward. If you move the beginning or end of the edit backward, the
	source reference shifts backward. The edit remains in the same spot
	in the timeline but the source shifts.
	\item[Src Only (slip)] \index{trim!slip} move the in and out point of a single
	clip without changing the timeline duration. In a drag \textit{Src
		Only} operation, nothing is cut or pasted. If you move the beginning
	or end of the edit forward, the source reference in the edit shifts
	forward. If you move the beginning or end of the edit backward, the
	source reference shifts backward. The edit remains in the same spot
	in the timeline but the source shifts.
	\item[Slide] \index{trim!slide} a single clip is moved but retains its current in
	and out point; however the out point of the clip to the left changes
	and the in point of the clip to the right also changes.  Timeline
	duration remains the same.
	\item[Edge Left/Right] \index{trim!edge} moves the edge of the clips.
	\item[No effect] no changes are made.  You might want to use
	this choice to prevent accidental movements.
\end{description}

The next table displays the options and results
with the Key Table here first.

\begin{lstlisting}[style=sh]
s = src media start
p = proj position
l = length
c = cut distance
rest == p+=c: for rest of clips
01 = flags edits_moved, rest_moved
\end{lstlisting}

\renewcommand{\arraystretch}{1.15}
\begin{center}
	%\caption{}
	%\label{tab:}
	% Tell table to adjust font to fix on the page using \resize	
		\begin{longtable}{lllll}
			\toprule
			&  & \textbf{Drag Left} & \textbf{Drag Right} &\\
			\midrule
			\multicolumn{2}{l}{\textit{curr s += c, l -= c; + rest}} & $\leftarrow$ & $\rightarrow$ & \textit{rest}\\
			abc12345xyz & \textbf{Ripple} left edge 11 $\rightarrow$ & abc012345xyz & abc2345xyz &\\
			\midrule
			\multicolumn{2}{l}{\textit{curr l += c; + rest}} & $\leftarrow$ & $\rightarrow$ & \textit{rest}\\
			abc12345xyz & \textbf{Ripple} right edge 01 $\rightarrow$ & abc1234xyz & abc123456xyz &\\
			\midrule
			\multicolumn{2}{l}{\textit{prev l += c; curr ps+= c, l -= c}} & $\leftarrow$ & $\rightarrow$ &\\
			abc12345xyz & \textbf{Roll} left edge 00 $\rightarrow$ & ab012345xyz & abcd2345xyz &\\
			\midrule
			\multicolumn{2}{l}{\textit{curr l += c; next ps+= c, l -= c}} & $\leftarrow$ & $\rightarrow$ &\\
			abc12345xyz & \textbf{Roll} right edge 00 $\rightarrow$ & abc1234wxyz & abc123456yz &\\
			\midrule
			\multicolumn{2}{l}{\textit{s -= c}} & $\leftarrow$ & $\rightarrow$ &\\
			abc12345xyz & \textbf{Slip} left edge 10 $\rightarrow$ & abc23456xyz & abc01234xyz &\\
			\midrule
			\multicolumn{2}{l}{\textit{s -= c}} & $\leftarrow$ & $\rightarrow$ &\\
			abc12345xyz & \textbf{Slip} right edge 10 $\rightarrow$ & abc23456xyz & abc01234xyz &\\
			\midrule
			\multicolumn{2}{l}{\textit{prev l += c; curr p+= c; next ps += c, l -= c}} & $\leftarrow$ & $\rightarrow$ &\\
			abc12345xyz & \textbf{Slide} left edge 10 $\rightarrow$ & ab012345wxyz & abcd12345yz &\\
			\midrule
			\multicolumn{2}{l}{\textit{prev l += c; curr p+= c; next ps += c, l -= c}} & $\leftarrow$ & $\rightarrow$ &\\
			abc12345xyz & \textbf{Slide} right edge 10 $\rightarrow$ & ab12345wxyz & abcd12345yz &\\
			\midrule
			\multicolumn{2}{l}{\textit{curr s -+= c, l += c; + rest}} & $\leftarrow$ & $\rightarrow$ & \textit{rest}\\
			abc12345xyz & \textbf{Edge} left edge 11 $\rightarrow$ & abc2345xyz & abc0123456xyz &\\
			\midrule
			\multicolumn{2}{l}{\textit{curr l -+= c; + rest}} & $\leftarrow$ & $\rightarrow$ & \textit{rest}\\
			abc12345xyz & \textbf{Edge} right edge 01 $\rightarrow$ & abc1234xyz & abc123456xyz &\\
			\bottomrule
		\end{longtable}
\end{center}
\renewcommand{\arraystretch}{1}

Next, a more immediate and colorful view shows these trimming
options (figure~\ref{fig:trim-color}).

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.8\linewidth]{trim-color.png}
	\caption{The 5 types of Trim: note the different lengths of the results.}
	\label{fig:trim-color}
\end{figure}

\paragraph{How to do a J-cut or L-cut} A J-cut \index{J-cut/L-cut} is a split edit film
editing technique in which the audio from a following scene overlaps
the picture from the preceding scene, so that the audio portion of
the later scene starts playing before its picture as a lead-in to
the visual cut.  An L-cut is a different split edit film editing
technique in which the audio from preceding scene overlaps the
picture from the following scene, so that the audio cuts after the
picture, and continues playing over the beginning of the next scene
(figure~\ref{fig:j-cut}). To do either a J-cut or an L-cut, you
first shorten the first or second video a little.  Then you block
the audio tracks from changing by disarming the appropriate tracks.
Finally use \textit{One Edit (roll)} the cutting edge off the
videos.  Moving to the right creates a J-cut and moving to the left
creates an L-cut.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.8\linewidth]{j-cut.png}
	\caption{J-cut to left and L-cut to right}
	\label{fig:j-cut}
\end{figure}


\subsection{Split View in Compositor Using the Drag Handle with Trim}%
\label{sub:split_view_compositor_using_drag_trim}
\index{trim!split view}
The Trim Feature using the drag handle provides some good ways to
view your video while editing.  The playback position in the
compositor is updated live and the view in the compositor can be
split so that in the left half of the compositor you can see the
last frame of the left clip and in the right half the first frame of
the right clip.  Dragging edits can not be extended past the
beginning or the end.

First familiarize yourself with button operation; check your setup
by executing the following step.  In the \texttt{Settings
	$\rightarrow$ Preferences $\rightarrow$ Interface} tab, Editing
section, clicking on the edit boundaries can be set for Button 1, 2,
3 as one of the following:

\textit{Ripple}; \textit{Roll}; \textit{Slip}; \textit{Slide};
\textit{Edge} or \textit{No effect}

Now to use this feature, create a track with edits that have trims
on the left and/or the right. The edit boundary can be modified
using \textit{drag handles} at the boundary between the edits
(figure~\ref{fig:trim-display}).

\begin{figure}[htpb]
	\centering
	\includegraphics[width=1\linewidth]{trim-display.png}
	\caption{Split compositor screen showing the result of the Trim feature}
	\label{fig:trim-display}
\end{figure}

\begin{description}
	\item[Left Mouse Button (LMB) usage:] If you grab the edit
	handle from the right side, you will see a left arrow and dragging
	the boundary will modify the right edit playback starting time. If
	you grab the edit handle from the left side, you will see a right
	arrow and dragging the boundary will modify the left edit playback
	ending time. In both cases, the composer will show the edit endpoint
	of the changed edit.
	\item[Shift LMB usage:] The effect on the edits is the same as
	described above, but the composer will show a split screen of the
	left and right edits as they appear at the drag handle
	boundary. Dragging will only change one of the two images, since
	only one edit is being changed.
	\item[Middle Mouse Button (MMB) usage:] Both the left and the
	right edit ending/starting times are updated.  The image shown in
	the compositor will be drawn from the side of the drag grab, that is
	the left if it is grabbed from the left, and the right if it is
	grabbed from the right.
	\item[Shift MMB usage:] The effect on the edits is the same as
	described above, but the composer will show a split screen of the
	left and right edits as they appear at the drag handle boundary.
	Dragging will change both of the two images, since both edits are
	being changed.
	\item[Right Mouse Button (RMB) usage:] The start/end point of
	the current edit is moved, but the edit length is unchanged only one
	image changes since only one edit endpoint is view is updated.
	\item[Shift RMB usage:] The effect on the edits is the same as
	described above, but the composer will show a split screen of the
	left and right edits as they appear at the drag handle boundary.
	Dragging will only change one of the two images, since only one edit
	is being changed.
\end{description}




\section{Nesting clips and assets}%
\label{sec:nesting_clips_and_assets}
\index{nested EDL}

\subsection{Nested Assets}%
\label{sub:nested_assets}
\index{nested assets}

A nested asset is an EDL session that
embeds an existing EDL session, all tracks, all plugins, editing,
and effects into a media object that appears as one audio/video
media object, no plugins, editing, or effects.  It is as if the
existing EDL was rendered, and loaded in its place.  This has
several interesting side effects.  First, you donâ€™t have to render
the entire media file to see any portion.  Second, it requires no
rendering compute time or storage.  Third, it changes the precedence
of the composer so that you get more control over the projection and
automation, so that the results can be sent into another rendering
step, not simply part of the current stack.  It groups the plugin
stack in much the same way that an arithmetic expression is grouped
by parenthesis.

The EDL session and the rendered output are visually equivalent.
Nested assets allow for complex grouping and stacking of effects,
and makes media access much more flexible.  This feature can be used
recursively, that is, any number of sessions may be stacked and
referenced as an asset, as long as all of the rendering resources
are available.  Nested assets are added to the timeline by using the
pulldown \texttt{File $\rightarrow$ Load files}\dots on the main
menu and selecting the \textit{Insertion strategy} of \textit{Nest
	asset}. The file will be pasted into the timeline over the current
selection or at the insertion point.

It is somewhat important to note that nested assets and nested clips
will have index files automatically created.  These index files can
start to clutter up your \texttt{\$HOME/.bcast5} directory with
files named \texttt{Nested\_\#\#\#.idx} and you may want to
periodically delete any index files which are no longer in use.

\subsection{Nested Clips}%
\label{sub:nested_clips}
\index{nested clips}

 It is also possible to create
\textit{clips} and convert them to \textit{nested edl}.  This is
done by first creating a clip using the standard cut, clipboard,
paste, and/or edit panel buttons.  Now, using the resources
\textit{clip} folder, select a clip to be nested, and use the right
mouse button to select a clip.  This activates the clip popup menu.
Select the \textit{Nest to media} menu item, and the clip will be
converted to a \textit{Nested: Clip} and put in Media
folder. Conversely, you can select a \textit{Nested: Clip}, use the
\textit{EDL to clip} menu item, and the clip will be reverted to a
\textit{Clip}.  This works similarly to the group / un-group editing
features of many graphic design editing programs, but in this case
the groups are rendered compositions (figure~\ref{fig:nesting}).

Nested clips can be proxied and when they are, the resulting files
are placed in the user's \texttt{\$HOME/Videos} directory by default.  This
can be modified by changing

\texttt{Settings $\rightarrow$ Preferences $\rightarrow$ Interface}
tab, Nested Proxy Path.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=1.0\linewidth]{nesting.png}
	\caption{Nested clips in Timeline and Resources window}
	\label{fig:nesting}
\end{figure}

\paragraph{Notes:} creating nested clips is a complicated internal process for \CGG{}, especially for managing audio tracks. Therefore you need to make sure you have your project set up as you expect before you start nesting with the \texttt{Nest to Media} command.  Below are several things to remember.

\begin{itemize}
	\item The creation of the nested clip is based on the settings in \texttt{Settings $\rightarrow$ Format}. Be sure that the number of audio tracks and channels is the same as we want to have in the nested clip. In addition, it is better to make each audio track independent from the others (which could be linked in more than one channel) using the option: \texttt{Audio $\rightarrow$ Map 1:1}
	\item You can do any editing on the nested clip once it is loaded to the timeline. For example we can start an OpenEDL \index{openEDL} session to make the changes. Once out of the OpenEDL session it may be that the changes made are not visible in the original nested clip. You can fix this by doing RMB on the nested clip in the \textit{Resources/Media} window and choosing \texttt{Rebuild index}. This process may take some time depending on the size of
the media; because of the additional time required to do this, it is not done automatically in order to allow the user to make the decision as to when they are done editing enough and need to see the exact results
in order to save time.
	\item Because of the way the timeline thumbnails are displayed, after editing using OpenEDL of a
nested clip, the thumbnails of the video track may be redrawn and may look different and out of sync with the
way they did originally with respect to the audio waveforms. This is simply a result of the redrawing of the
video track which is independent from the redrawing of the audio tracks. The playback is still synchronized.
\end{itemize}

\paragraph{Usage Examples of Nested Clips}

\begin{description}
	\item[Example 1:] You want to make a flashback/rewind at the end
	of your video that represents a quick summary of the entire video in
	black and white. On he timeline, you have 60 seconds of edits with
	clips, cuts, zoom in, zoom out and any other edits. Now you want to
	get this 60 seconds \textit{compressed} to 10 seconds, play in
	reverse, and in black and white at the end of your video.  You would
	copy the 60 seconds in a clip, nest the clip in the Clip folder of
	the Resources window and drag it to the timeline. You will see only
	a clean clip without all of the edits that were used to create it
	because nesting display a clip without having to actually use the
	Render menu.  Now you can add a Reverse effect, Color3way plugin for
	black and white, and use the Speed auto to get the 60 seconds down
	to only 10 seconds.
	\item[Example 2:] You are working on a complex project with a
	team in a separate location. You create some sub projects, i.e.\
	sequences, that you or the team will use in the Master project to
	merge the sequences in the right order and to make the final color
	correction steps.
\end{description}

In each of the examples you can see the benefit of nesting to create
clean looking timelines because of the automatic rendering
capability of nesting.

\section{Multi-Camera / Mixer}%
\label{sec:multicamera_mixer}
\index{multi-camera}
\index{mixers}

Use the Mixer Viewer to see multiple media playing simultaneously in re-sizable mini-viewers.  This can be used in various ways and is useful to edit videos shot by multiple cameras from different viewpoints that were simultaneously recorded in order to create a single good video.  Everything will have to be initially synced so you can decide which one of the camera angles is best suited at any time. Mixer mode does not support audio only tracks but there is a workaround described at \nameref{cha:faq_problems_workarounds}.

The number of cameras/mixers you can have is generally limited to the available resources on your computer.  Currently, the number of File Descriptors available in the OS limits cameras to about 50.  If you have many \textit{mixer viewers} you will probably want to use proxy mode whenever possible.  Also, in the \texttt{Settings $\rightarrow$ Playback A} tab \textit{Video Out} section, uncheck \textit{play every frame} and choosing a Video Driver of \textit{X11} with \textit{use direct X11 render if possible} checked, will provide better performance.

Figure~\ref{fig:multicam01} shows 9 media sources in the left corner, the composed video in the right corner, the timeline with the top video track with pieces of the 9 overwrites, and the choice in Resources of Mixed.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=1.0\linewidth]{multicam01.png}
	\caption{Using Mixer capability in Cin for multiple cameras}
	\label{fig:multicam01}
\end{figure}

\subsubsection*{Easiest Method to Getting Started}%
\label{ssub:easiest_method_started}

\begin{enumerate}
	\item This method assumes all of your media or cameras are aligned the way you want them already.
	\item From the \textit{File} pulldown, create a \textit{New project} with the desired format for Audio and Video output (or you can just use the default).
	\item \texttt{File $\rightarrow$ Load} the media files you want to work with using \textit{Create new resources only}.
	\item In the Resources window, with  the Media folder, highlight the list of media you want to \textit{Mix}. This is done using a ctrl or shift mouse button press as you would in a standard listbox selection.
	\item Right click the mouse on the media selection and choose \textit{open mixers} \index{mixers!open mixers}. This opens multiple mixer viewer \index{mixers!viewer} windows, one for each media item that was highlighted.  You can
	do them 1 at a time instead.  This also adds the source media tracks to the main window.
	\item Now use the timeline \index{timeline} to play and you will see all viewers/cameras playing.  Stop when you get to the
	end of the \textit{good} camera playback.
	\item Simply double click the \textit{good} mixer viewer and from where you first started playing to the playback insertion pointer is the source section, which will be pasted in the destination video/audio tracks at the top of the new project.
	\item Repeat steps 6-7.  Start playing again, stop when you want, double click the desired mini-viewer!
\end{enumerate}

\subsubsection*{Some Hints and Caveats}%
\label{ssub:hints_caveats}

\begin{itemize}
	\item You can easily overwrite a section of the new track by \textit{selecting} a section on the timeline, then double click on one of the mini-viewers to overwrite/replace that section.
	\item If you edit the output tracks, it only edits output tracks, and the input tracks may no longer be lined up.
	\item You can add a silent section by selecting past a section and start overwriting that section from then on.
	\item If you use the cursor hairline to create the selection endpoint, it must be past the end of the destination.
	\item The compositor shows composed media.  This is the media that will be rendered.
	\item The program always uses overwrite as the paste operation.
	\item Use the timeline edit handles to move the start and end points of that section.
	\item Only middle mouse drag handle operations should be used normally.
	\item Other drags will displace the media source/destination timeline correspondence.
	\item To re-tile the mixer windows after you have resized and moved them around, you can use the Window
	pulldown of \textit{Tile mixers} or the shortcut of Alt-t.
\end{itemize}

\subsubsection*{But, I want to use only the first set of audio tracks\dots}%
\label{ssub:but_use_only_first_audio}

There are many cases where you may want to compose using media from several different tracks while using the the same audio tracks as associated from a specific viewer.  Since mixer source tracks can be updated any time by using a mixer toggle \index{mixers!toggle}, this makes it possible to do this.  

Procedure to update the mixer audio source track list:

\begin{enumerate}
	\item Single click to highlight the mixer window you want to re-associate to the audio track.
	\item In that audio trackâ€™s patchbay click the expand toggle, the arrow on the right side.
	\item In the expanded pane that appears, there is another arrow on the left side.  This icon has the tooltip \textit{Mixer}.  Click this and because in step \#1 you highlighted the mixer window, it will now be toggled on.  Once you click the mixer icon it will then point up.
	\item Now, disassociate any audio that is unwanted by expanding its patchbay and toggling off the mixer.
\end{enumerate}

\subsubsection*{Expert Usage}%
\label{ssub:expert_usage}

When you double click a mixer viewer window, it operates an \textit{overwrite} paste operation.  This moves \textit{src} (source) track edits to \textit{dst} (destination) track edits over the same selected timeline region.

\begin{itemize}[noitemsep]
	\item \textit{Src tracks} should be not playable and not armed in the main window patchbay gui.
	\item \textit{Dst tracks} should be playable and armed in the main window patchbay gui.
\end{itemize}

Each mixer viewer maintains a list of the tracks which will be used as src. This list is made visible selecting the window with the left mouse button.  When the mixer viewer is selected, a highlight is drawn around the media image.  All track patchbay \textit{mixer} toggles are updated to reflect the src tracks included in the selected viewer src track list. The \textit{play track} patchbay toggles can be used to manage the list.

\begin{itemize}[noitemsep]
	\item \textit{Turning on} a toggle (pointing up) includes the track in the src track list.
	\item \textit{Turning off} a toggle (pointing right) removes the track from the src track list.
\end{itemize}

New Mixer viewers can be created using the main menu \texttt{Window $\rightarrow$ Mixer Viewer}, or with a shortcut of \texttt{Shift-M}.  When a new viewer is created, the currently enabled patchbay \textit{mixer} toggles are used to create the viewer source track list.  The toggles are cleared after the window is created.  This is to improve the work flow.  Use the following list of steps to create individual mixer viewers.

To create a list of mixer viewers:

\begin{enumerate}
	\item Setup the session \texttt{settings $\rightarrow$ format}, width, height, frame rate, color model, aspect ratio.
	\item Create dst tracks using the a/v track pulldowns (or use shortcuts "t" / "T"),  armed and playable.
	\item Append src tracks using \texttt{file $\rightarrow$ open $\rightarrow$ append tracks}, or the resource window using pasting.
	\item Using the track patchbay, disarm editing and disable playback of the audio/video src tracks.
	\item Using the track patchbay, mark the new tracks as \textit{mixer} source to be added to the viewer.
	\item Create a mixer viewer using the main menu pulldown, or the shift "Mâ€ shortcut.
	\item Repeat steps $3-6$ for each mixer viewer needed for the session editing.
\end{enumerate}

When you single click a mixer window, it becomes selected and highlighted and all of the patchbay mixer toggles are updated to reflect the state of the viewerâ€™s src tracks.  Tracks that will be src are shown as enabled.  If you change a toggle, the src tracks for the selected window will be modified.  This means you can associate or dis-associate any media track to any mixer window.

When you double click a mixer window, an overwrite paste is invoked.  The mixer viewerâ€™s src tracks are overwritten to the dst tracks.  The timeline region for both the source and destination are the same for the overwrite paste function.  The selection region is used if it is active.  If the selection is empty, that is it is a hairline, the selection region is from the end of the destination playable edits to the selection cursor hairline.  The hairline must be past the end of the playable edits on the destination tracks.

The mixer viewer configuration is saved with the session data.  When a saved session is loaded in \textit{replace project} or \textit{replace project and concatenate tracks}, the mixer viewer will be reopened.

\subsubsection*{Using Proxy with \textit{Open Mixers}}%
\label{ssub:using_proxy_open_mixers}

The best way to use proxy \index{proxy} with your multiple cameras is to follow the steps below:

\begin{enumerate}
	\item Load media with insertion strategy of \textit{create resources only}.
	\item Highlight the media in the Resources window and right click on this to choose \textit{open mixers}.
	\item Use the \texttt{Settings $\rightarrow$ Proxy settings}\dots to bring up the proxy menu.
	\item Choose the size and other options you want and click the checkmark OK. If you choose the option \textit{Beep when done} you will hear a short beep if all media is already proxied or a longer beep when all proxies have been created.
	\item When your editing is complete, use \textit{Settings} pulldown and proxy to \textit{original size}.
\end{enumerate}
Instead of Open Mixers, you can Insert Mixers \index{mixers!insert mixers} with new tracks at the timeline insertion point.

\subsubsection*{Options available in the \textit{Mixer Windows}}%
\label{ssub:options_available_with_mixers}
\index{mixers!viewer RMB options}

There are several options you will see in each Mixer viewer \index{mixers!viewer} that help with using them. These
are shown in figure~\ref{fig:mixer-playable}. To use these, RMB in the desired mixer window,
and choose one of the options as described here.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=1.0\linewidth]{mixer-playable.png}
	\caption{A Mixer window showing available options with the white X designating no playing}
	\label{fig:mixer-playable}
\end{figure}

\begin{enumerate}
	\item Fullscreen / Windowed - will bring up a fullscreen display of that window or revert to the original size.
	\item Resize Window - allows for resizing the window to a choice of different sizes.
	\item Tile Mixers \index{mixers!tile mixers} - makes it easy to get all of the mixers nicely tiled to a standard size.
	This is also available in the \textit{Window} pulldown.
	\item Playable - enabled by default so that you will see a checkmark next to it in the 
	popup.  The benefit of making a mixer window not playable is to save cpu time. When a specific
	mixer window is unchecked, so not Playable, a white cross appears in the upper left hand corner
	of the mixer.  To switch back to playing again, RMB and choose Playable and this will turn
	playing back on. The program automatically updates the mixer image when the timeline cursor
	stops or when it is moved to a different spot even when play is disabled. You can see the
	white cross designating not playable in figure~\ref{fig:mixer-playable}. Statistics that show
	the savings are as follows on a 16 cpu laptop:
	\begin{verbatim}
	5 Mixers all playing -- cpu usage = 1275
	1 only playing       -- cpu usage =  405
	2 only playing       -- cpu usage =  800
	\end{verbatim}
\end{enumerate}

\subsubsection*{Mixers pulldown}%
\label{ssub:mixers_pulldown}

From Program windows menu we can access the \texttt{windows $\rightarrow$ mixers...} there are several entries available (see figure~\ref{fig:mixers-pulldown}):

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.5\linewidth]{mixers-pulldown.png}
	\caption{Mixers...  pulldown}
	\label{fig:mixers-pulldown}
\end{figure}

\begin{description}
	\item[Mixer Viewer:] \index{mixers!viewer} (Shift-M) opens a new empty \textit{Mixer 1} window, which will then be associated with a track. We can open as many Mixers as we like.
	\item[Drag Tile mixers:] \index{mixers!drag tile mixers} (Alt-t) the default size of a mixer window is related to the std size of the \textit{Viewer} window. If we want to modify it at our convenience, we can build a window of the desired size with the \textit{Drag Tile mixers} function and then automatically order our mixers within it with the right click of the mouse.
	\item[Align mixers:] \index{mixers!align mixers} see \nameref{sub:audio_video_sync_waveform}
	\item[Mix masters:] \index{mixers!mix masters} this feature makes it very easy to get into the multi-camera mixer mode after tracks have already been set up and edited. Before this addition, you could only \textit{Open Mixers} from original media assets in the \textit{Resources} window.
	\item[Entries:] If the mixers of several sources have been opened, the entries of each assets will appear, useful for recalling a specific mixer window.
\end{description}

\subsection{Recover Mixer Windows}%
\label{sub:recover_mixer_windows}
\index{mixers!recover mixer window}

It is a hazard that you might accidentally \textit{undo} (\texttt{z or Ctrl-z}) too far and lose your mixer windows.  Here are the steps to recover.  It is recommended that you make a backup of your project before performing the recovery steps just in case there are other problems.

In the patchbay box to the left of the main timeline, there is a right pointing arrow on the right side.  This is called the \textit{Expander} (figure~\ref{fig:mixer-patchbay01}).  When you click on each expander, another line appears below that expander arrow and the timeline track height is slightly increased.  If you Shift-click on a single expander, the patchbay will expand for all of the tracks.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.35\linewidth]{mixer-patchbay01.png}
	\caption{Mixer  patchbay}
	\label{fig:mixer-patchbay01}
\end{figure}

\begin{enumerate}
	\item Expand all of the patchbay lines, either one by one, or Shift-click on one to do them all. This is so you can see the \textit{mixer} right pointing arrow on the second expanded line.    
	\item Use the \textit{Window} pulldown and choose \textit{Mixer Viewer} to bring up a new mixer window.  Now you will be making an association between the mixer viewer and the trackâ€™s video.
	\item Click on the new mixer window to make sure it is highlighted with a white border. This designates it as the \textit{in use} mixer viewer.
	\item Set your play to the beginning of the video using the \textit{Home} key or \textit{Home} transport button.
	\item In the patchbay for a video track click on the \textit{mixer} arrow on the expanded $2^{nd}$ line which is a right facing arrow.  Now the arrow will point up.  If there are audio tracks with that video, click on each of its audio tracks \textit{mixer} arrow until they point up also.
	\item Next move your insertion pointer on the timeline where there is video.  Some of the time this just helps so that the new mixer viewer window gets redrawn and you can see that the images appear; but the image may not appear until the program does a redraw later.  Now the mixer viewer should be
	correctly associated.  Note if you have large video, give it some time to update.  You may have to click on the mixer viewer window if the image does not show.  You can always start over with that mixer if you encountered any problems.
	\item Click the arrows that are pointing up in that video and its audio so they go back to pointing right. That mixer viewer is complete so you need to do this to make sure the \textit{mixer} arrows are off.
\end{enumerate}

Repeat steps 2 through 7 for each of the mixer viewers you need going down the patchbay starting on step 2 first with Mixer 1, then 2 to 7 steps for Mixer 2, then again run 2 to 7 for Mixer 3 and so on.

Sometimes the association does not stick initially.  If not, highlight the mixer viewer with the problem, change the mixer arrows to point up, and reassociate.

% For html, make sure using below is different from via in subsection
\section{Audio/Video sync using Waveforms/Timecodes}%
\label{sec:audio_video_sync}
\index{audio/video sync}

\subsection{Audio/Video sync via Waveform}%
\label{sub:audio_video_sync_waveform}
\index{audio/video sync via waveform}

Multi-camera \index{multi-camera} footage of a single event can have various shots starting and ending at different times. So when the footage start times are different, you can use the mixer audio to synchronize the clips on the timeline. The program algorithm attempts to find and align automatically the waveforms of the media.

Synchronizing multiple camera videos based on audio tracks can be done with \CGG{} easily enough with the \texttt{Window $\rightarrow$ Mixers$\dots$ $\rightarrow$  Align mixers} option.  Align mixers brings up a window displaying your mixers, the currently selected Master Track, and a list of all of the Audio Tracks (figure~\ref{fig:mixer-align01}).  There is a limit of 32 audio tracks per each mixer (that should be enough!)

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.9\linewidth]{mixer-align01.png}
	\caption{Align Mixers window}
	\label{fig:mixer-align01}
\end{figure}

Two different methods of aligning the audio for mixers are available. They are most easily referred to by the button that is pressed -- \textit{Match} and \textit{Match All}. There are also 2 methods of activating the alignment -- \textit{Apply} and \textit{Move}.  

\textit{Match} consists usually of the next set of steps to take advantage of this feature:

\begin{enumerate}
	\item Load your camera media with insertion strategy of \textit{resources only}
	\item Highlight in the Resources window, all of the media you want to mix.
	\item Right mouse button on one of the media and click on Open Mixers; all mixer windows come up.
	\item To arm the created mixer tracks and related audio tracks. They are automatically placed on the timeline disarmed. This is right for multi-cam but not for audio sync.
	\item Provide a small target audio pattern on the Master Track for syncing by marking with the In/Out points ([ and ]). NOTE: When choosing between the audio tracks to align the one that will have to work as Master, we must rigorously use the one with the right-most synchronization peak. This is because the Master track will be started at the beginning of the timeline. If during alignment the other tracks should move further to the left than the Master, they will be truncated at 00:00:00:000, finding no more space available, and will be shortened with loss of footage for the next multi-cam
	\item Make a selection on the timeline in which to look for the pattern. Left mouse click, then drag select and highlight a search time domain. 
	\item Use the \texttt{Window $\rightarrow$ Mixers$\dots$ $\rightarrow$  Align mixers} to bring up its dialog window.
	\item Highlight in the first listbox, the Mixer number you want to align. Click on \textit{Match}. This will take a few seconds so watch the rendering time percentage on the lower right hand side zoom panel. The buttons will be ghosted out until finished. Now note the changed values in the Audio Tracks listbox.
	\item If you are satisfied with the calculated Nudge values -- that is they are very close to $1.0$ -- in the Audio Tracks listbox and the audio track selected as the Master Track in the Master Track listbox, hit the \textit{Apply} button.
	\item If you plan on performing more alignment tasks, click on Checkpoint so you can go back to a previous step in case you make a mistake.
	\item Last, click on the OK green checkmark or to cancel click on the red X.  Or just close the gui.
	\item To disarm the mixer tracks and related audio tracks for the next multi-cam operations.
\end{enumerate}

\paragraph{Reset} is used to start over with the current session data, not an undo.  This means you can use the match repeatedly to refine alignments.  All of the Audio Tracks listbox values will be reset.

\paragraph{Checkpoint} provides a method to create checkpoints that save the current state.  This is especially helpful while learning or doing more complicated operations where you might make a mistake or do not like the results and need to get back to a previous state.

\paragraph{Undo} is used to put the media back to a previous state on the timeline.  If you choose \textit{start over} the session will reload with the original, before any changes were applied.  You can also go back to any of your previous checkpoints that you created earlier which are listed there, such as \textit{chkpt 1}.

\paragraph{Match All}is used when you have several mixers, instead of only picking 1 to match, it picks the best match for EACH of the mixer tracks based on a single master track. So when you hit Apply, each track might move differently. You do not set In/Out points but you have to make a selection within which to match.

\paragraph{Apply} button will apply the nudges that were generated during the Match or Match All execution (figure~\ref{fig:mixer-align02}).

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.9\linewidth]{mixer-align02.png}
	\caption{Aligned mixer window after "Match". Note the Nudge amounts above.}
	\label{fig:mixer-align02}
\end{figure}

\paragraph{Move} is very handy when you are using mixers, if you have an edit somewhere that you need to fix specifically without moving any of the other track pieces. In this case you have to select a section (like you do a group, but do not make a group), generate a match, and then you can just \textit{Move} that set only -- everything else stays where it is at its current location (figure~\ref{fig:mixer-align03}).

\begin{figure}[htpb]
	\centering
	\includegraphics[width=1.0\linewidth]{mixer-align03.png}
	\caption{Match setup for aligning by audio.  Note that [ ] are set over a sample waveform highlighted selection that includes that.}
	\label{fig:mixer-align03}
\end{figure}

More detailed information follows about how this all works and the information in the dialog window.  It is important to know that the result of the calculation is \textit{best match} but you can still override the selections if you decide there is a better one.  The dialog window is split into 3 sections:

\begin{enumerate}
	\item \textit{Mixers} lists the mixers that are active by highlighting them all initially. You can decide that you do
	not want 1 or more mixers to be used in the correlation calculation by un-highlighting the one(s) that should not be used. In some cases you have to have at least 2 in order to align audio.
	\item \textit{Master Track} lists each of the audio tracks currently loaded for all of the mixers. You can decide to highlight a different audio track to be used as the master for correlation, but only 1 can be used. Remember to use the track with the right-most synchronization peak as the Master.
	\item \textit{Audio Tracks} lists each of the mixer audio tracks.  Again, you can highlight a different set of which
	mixer audio tracks that you want to use for the waveform correlation.  Any audio tracks that are not
	highlighted, that is \textit{turned off}, will not be considered in the correlation calculation.
\end{enumerate}

The corresponding input position is determined by track input correlation.

The letter "R" in the Audio Tracks listbox represents the correlation value.  $R=1.0$ designates that if both the pattern and the matching section were in the highlighted area, they are completely correlated -- this is a good self-test to check.
$Nudge=0.0$ means just that.

The header \textit{pos} stands for the timeline position. When the \textit{Apply} button is pressed, only the Mixers listbox is relevant at that time.

The Mixer with the master track generally does not move, everything else will be lined up (figure~\ref{fig:mixer-align04}).

\begin{figure}[htpb]
	\centering
	\includegraphics[width=1.0\linewidth]{mixer-align04.png}
	\caption{An audio Match is complete. Note the waveform is aligned.}
	\label{fig:mixer-align04}
\end{figure}

\textit{Match All} option basically consists of the following steps:

\begin{enumerate}
	\item Highlight the Mixer to use in the Mixer listbox.
	\item Highlight the Master Track you want to use in the Master Track listbox.
	\item On the timeline, mark your selection on the Master Track.
	\item Click on the \textit{Match All} button.
	\item Note the nudge values to see if they make sense, and if so, press \textit{Apply}.
\end{enumerate}

\textit{Match} option basic steps (just for comparison with Match All):

\begin{enumerate}
	\item Set the In/Out points [ ] of the target.
	\item On the timeline, mark your selection.
	\item Click on the \texttt{Match} button.
	\item Note the nudge values to see if they make sense, then press \textit{Apply} (or \textit{Move} when doing a group).
\end{enumerate}

\subsection{Align Timecodes}%
\label{sub:align_timecodes}
\index{audio/video sync via timecodes}
\index{align timecodes}

Align Timecodes is especially useful in the case where you create video with multiple cameras capable of recording a timecode in the metadata of each file.  Letâ€™s say we have recorded three videos at the same time at a concert with each camera set up at unique positions and at different angles.   All of the cameras start recording at various times but were synchronized with the same master clock (\textit{Timecode Sync Generator} or \textit{Jam Sync timecode}) so that the recordings are timestamped with that synchronized time.  For example, the 3 cameras have embedded metadata as follows: \quad \textbf{camera 1} = 00:00:00:01 \quad \textbf{camera 2} = 00:00:10:07 \quad \textbf{camera 3} = 00:00:17:22

\begin{figure}[ht]
	\centering
	\includegraphics[width=1.0\linewidth]{timecode-01.png}
	\caption{Before sync}
	\label{fig:timecode-01}
\end{figure}

Timecode synchronization is performed by the program when you choose the option \textit{Align Timecodes} and works in 2 steps. The first automatic step is to locate the earliest timecode \index{timecode} and the second step is to align the edits on the armed tracks using that time on the timeline. 

When you load in the three files to different tracks, they'll be placed on a timeline that starts from $00:00:00:00$ as usual. But, by middle mouse clicking (MMB) on any of the video tracks, you can view the timecode embedded at that point in that file.

To make it easy to align the videos onto the timeline manually, set the \textit{origin point}, that is the leftmost time index, of the timebar to the timecode of the earliest video.  For the 3 aforementioned cameras this would be camera 1 with a timeecode of $00:00:00:01$.  By using the \textit{clapboard} button on the main timeline, you can set $00:00:00:01$ as the start timecode. Then positioning the camera 1 video at the start of the timeline will line its frames up with the times on the timebar.

\begin{figure}[ht]
	\centering
	\includegraphics[width=1.0\linewidth]{timecode-02.png}
	\caption{Clapperboard button}
	\label{fig:timecode-02}
\end{figure}

Similarly, using the middle mouse button to view the other 2 cameraâ€™s timecodes, you can position them  so their timecodes line up and now all three tracks will be in sync.  You can do this manually or simply do it automatically with the option under: \texttt{Tracks  $\rightarrow$  Align Timecodes}. See figure~\ref{fig:timecode-03}

\begin{figure}[ht]
	\centering
	\includegraphics[width=1.0\linewidth]{timecode-03.png}
	\caption{After sync}
	\label{fig:timecode-03}
\end{figure}

Timecode synchronization in \CGG{} is based on the inclusion of an actual \textit{timecode} saved in
the media as can be seen using the \texttt{ffprobe} or \texttt{mediainfo} command line. Examples are shown here:

\begin{lstlisting}[style=sh]
# ffprobe tut1.mov
Metadata:
handler_name:	VideoHandler
timecode:		00:00:20:01

# mediainfo mtb.mp4
Time code of first frame:	11:05:49:41
Time code, striped:		Yes
Title:				GoPro AVC
\end{lstlisting}

Many newer cameras and media in a MOV container have valid timecodes often with SMPTE
compliant start Timecode in Quicktime format, whereas others do not. Most low end cameras do not.
When no timecode is present, various clock time values may be used to synchronize instead.

There are various types of timecodes and they are written in metadata in various ways. Because it is not clear which timecode in the file is the one to use or there is none, the precedence as described next is followed. The contexts, packets, streams, and data refer to the corresponding ffmpeg data or metadata objects:

\begin{enumerate}
	\item if the format context has a timecode use: \texttt{fmt\_ctx $\rightarrow$ timecode - 0}
	\item if the layer/channel has a timecode use: \texttt{st $\rightarrow$ timecode - (start\_time -nudge)}
	\item find the first program stream with video stream, and if the video stream has a timecode use:
	\texttt{st $\rightarrow$ timecode - (start\_time-nudge)}
	\item find timecode in any stream use: \texttt{st $\rightarrow$ timecode}
	\item read 100 packets, save \texttt{ofs=pkt.pts*st $\rightarrow$ time\_base - st $\rightarrow$ nudge}:
	\begin{itemize}
		\item decode frame for video stream of the first program
		\item if \texttt{frame $\rightarrow$ timecode} has a timecode use:\texttt{ frame $\rightarrow$ timecode - ofs}
		\item if side\_data has gop (group of pictures) timecode use: \texttt{gop $\rightarrow$ timecode - ofs}
		\item if side\_data has smpte timecode use: \texttt{smpte $\rightarrow$ timecode - ofs}
	\end{itemize}
	\item if the \texttt{filename/url} scans \texttt{*date\_time.ext} use: \texttt{date\_time} (yr, month, day, hr, min, sec, nanosecond)
	\item if stat (display file status) works on the \texttt{filename/url} use: \texttt{mtime} (modification time)
	\item finally, if none of the above are usable, then return \texttt{failure}
\end{enumerate}

Operation of Align Timecodes includes the following options to help in your setup and review (figure~\ref{fig:timecode-04}):

\begin{figure}[ht]
	\centering
	\includegraphics[width=1.0\linewidth]{timecode-04.png}
	\caption{Timecode via MMB on track and via Resources windows/Info}
	\label{fig:timecode-04}
\end{figure}

\begin{itemize}
	\item \textit{Align Timecodes} under the \textit{Tracks} pulldown
	\item \textit{Clapperboard} icon on the main timeline to set a timecode.
	\item Timecode option added to timebar choices (in timecode $hh:mm:ss:ff$) with use of the session frame
	rate as a time standard.
	\item Time Code Start in the Resources window on the bottom of \textit{Info} for the media if the timecode for that
	asset has been scanned and is known. You can scan the assetâ€™s Timecode by using the middle mouse
	button on its track which then displays the timecode for that on the timebar (\texttt{MMB $\rightarrow$ Timecode}). Or you can use the shortcut \texttt{Ctrl+!}, after selecting the edit/track on the timeline.
\end{itemize}

\paragraph*{Notes}

\begin{itemize}
	\item \textit{Align Timecodes} is a good first step to quickly sync media up either perfectly or roughly.
	\item Currently this is not known to function for syncing audio recorded on a separate audio device,
	because no test material was provided to ensure that this works.
	\item Disarmed tracks will not be affected by using \textit{Align Timecodes}.
	\item No edits or sections will get cut off on the left or elsewhere, unless the moved edits overlap.
	\item You can add a timecode to video using an \texttt{ffmpeg} command if you want to align a particular video
	which has no timecode to ones that do. For example:
\end{itemize}

\begin{lstlisting}[style=sh]
ffmpeg -i originalfile.mp4 -metadata timecode="14:36:08:29" -c copy newfile.mp4

# where "-i" is followed by the input filename
# where "-metadata timecode" is followed by the timecode key
# where "-c copy" just copies the video/audio to the following output filename
\end{lstlisting}

\section{Subtitles}%
\label{sec:subtitles}
\index{subtitles}

\CGG{} can create subtitles directly in the timeline with the Subtitle tool. Subtitles are added by using the main window pulldown   \texttt{File $\rightarrow$ Subtitle} (Alt-y)  which brings up a window allowing you to type the filename of a previously generated text file containing the desired words/lines, the script.  After entering the filename, click \texttt{Load} to read in your script.  By creating a script file ahead of time, it lets you easily add dialog that was already written out and carefully edited for spelling and proper grammar.

The file must be plain text; a .srt or .sub can also be used, but only the text lines will be used and not the timecodes or comments. The format of the script/text input file has specific requirements as listed below:

\begin{itemize}
	\item Lines can be any length but they will be broken up to fit according to some criteria below.
	\begin{itemize}
		\item Running text used as script lines will be broken into multiple lines.
		\item The target line length is 60 characters.
		\item Punctuation may be flagged to create an early break.
		\item Single carriage return ends an individual script line.
		\item Double carriage return indicates the end of a entry and helps to keep track of where you are.
	\end{itemize}
	\item The "\textit{=}" sign in column 1 indicates a comment seen in the script text to assist you in location.
	\item An "\textit{*}" at the beginning of the line is a comment and not a script line.
	\item \textit{Whitespace} at either the beginning of a script line or the end will be removed.
\end{itemize}

Figure~\ref{fig:subtitle01} shows the Subtitle window you will see.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=0.8\linewidth]{subtitle01.png}
	\caption{Subtitle window}
	\label{fig:subtitle01}
\end{figure}

To put the subtitles onto your media, first add a subtitle track via the pulldown  \texttt{Tracks $\rightarrow$ Add subttl} (Shit-Y). In the Subtitle window, note that there are 2 major textboxes.  There is the \textit{Script Text} textbox showing the current entry of text from your input file and there is the \textit{Line Text} textbox showing the currently active text.  In your subtitle track, select a timeline region (in/out or drag select with hairline cursor/highlight or via labels or the \textit{selection start/length/end time} textboxes in the Zoom Panel) to indicate the region where you want the active Line Text to be pasted.  Then click the \texttt{Paste} button in the Subtitle window to paste the line onto the subtitle track.  Silence will be added to the subtitle track in the places in the media where there are gaps.

Editing in the Line Text box can be used to change the active script line. By double clicking the timeline over the subtitle track, you can reselect the active script line.  The subtitle text will be reloaded into the Line Text box and can be edited and re-pasted as the new active subtitle text.  You can also highlight multiple lines in the Script Text box and paste them (using the usual window paste methodology) into the Line Text box.  After pasting to the timeline, the Line Text box will be updated with the next script line.  In addition, if you triple click a line in the \textit{Script Text} box, it will automatically become the current line in the \textit{Line Text} box.

When you are finished, before clicking on \textit{Save}, you can specify the output format using the \textit{Format} drop-down button. You can choose between the classic \texttt{.udvd} (micro DVD) and the more universally supported \texttt{.srt} (subrip) and \texttt{.sub} (subviewer). The next step is to provide a legitimate filname in the \textit{Path} box; your current directory will be used if only a filename but no directory path is supplied.  The filename used will automatically have a "--" after it followed by the \textit{track label} and then \textit{udvd/srt/sub} extension added; any extension in the filename will be removed..  If you click OK before saving, the subtitle script position is saved with the session.  This is convenient for continuing where you left off.

To reposition the script, use the slider or tumbler buttons:

\textit{Slider} bar to move through the text entries quickly. \\
\textit{Prev} or \textit{Next} buttons to go to the previous or next script line.

Figure~\ref{fig:subtitle02} shows what the pasted subtitle script looks like in a portion of the main window.

\begin{figure}[htpb]
	\centering
	\includegraphics[width=1.0\linewidth]{subtitle02.png}
	\caption{Subtitles on timeline}
	\label{fig:subtitle02}
\end{figure}



